<!DOCTYPE html>
<html>
<head>
  <title>Create Paste</title>
  <style>
    body {
      background-color: #060f20;
      color:#0b2e7a;
      font-family: Arial, sans-serif;
      max-width: 600px;
      margin: 40px auto;
    }
    textarea,input{
      
      width: 100%;
      background: #020617;
      color:#e5e7eb;
      border:1px solid #334155;
      border-radius: 8px;
      padding: 12px;
      margin-top: 10px;
      font-size: 14px;
    }
    textarea{
        height:120px;
    }
    textarea::placeholder,
    input::placeholder{
        color:#64748b
    }
    button {
      color:white;
      background-color: rgb(9, 101, 30);
      border:none;
      border-radius: 8px;
      margin-top: 12px;
      padding: 8px 16px;
      font-size: 15px;
      cursor: pointer;
    }
    button:hover {
      opacity: 0.9;
    }
    .result {
      margin-top: 16px;
      word-break: break-all;
    }
    .error {
      color: red;
    }
    .helper {
        font-size: 12px;
        color: #94a3b8;
        margin-top: 4px;
        }

  </style>
</head>
<body>

  <h2>Create a Paste</h2>

  <textarea id="content" placeholder="Paste content..."></textarea>

  <input id="ttl" type="number" min="1" placeholder="TTL seconds (optional)" />
  <div class="helper">Paste will expire after TTL seconds</div>

  <input id="views" type="number" min="1" placeholder="Max views (optional)" />

  <button onclick="createPaste()">Create</button>

  <div class="result" id="result"></div>

  <script>
    async function createPaste() {
      const content = document.getElementById("content").value;
      const ttl = document.getElementById("ttl").value;
      const views = document.getElementById("views").value;
      const result = document.getElementById("result");

      result.innerHTML = "";

      const payload = { content };
      if (ttl) payload.ttl_seconds = Number(ttl);
      if (views) payload.max_views = Number(views);

      try {
        const res = await fetch("/api/pastes", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload)
        });

        const data = await res.json();

        if (!res.ok) {
          result.innerHTML =
            '<div class="error">' + (data.error || "Error") + "</div>";
          return;
        }

        result.innerHTML = `
          <strong>Paste created:</strong><br/>
          <a href="${data.url}" target="_blank">${data.url}</a>
        `;
      } catch {
        result.innerHTML =
          '<div class="error">Network error</div>';
      }
    }
  </script>

</body>
</html>
